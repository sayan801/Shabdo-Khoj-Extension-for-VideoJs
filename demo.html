<!DOCTYPE html>
<html>
<head>
  <title>Shobdhokhoj | add tags to your video</title>
  <meta charset="utf-8">
  <!-- Chang URLs to wherever Video.js files will be hosted -->
  <link href="assests/css/video-js.css" rel="stylesheet" type="text/css">
  <!-- Markers css -->
  <link href="assests/css/videojs-markers.css" rel="stylesheet">
  <!-- Overlay css -->
  <link href="assests/css/videojs-overlay.css" rel="stylesheet">
  <!-- Shobdhokhoj css -->
  <link href="assests/css/shobdhokhoj.css" rel="stylesheet">
  <!-- video.js must be in the <head> for older IEs to work. -->
  <script src="assests/js/video.js"></script>
  <!-- Markers js -->
  
  <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
  <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <script src='assests/js/videojs-markers.js'></script>
  <!-- Overlay js -->
  <script src='assests/js/videojs-overlay.js'></script>
  <!-- Unless using the CDN hosted version, update the URL to the Flash SWF -->
  <script>
    videojs.options.flash.swf = "video-js.swf";
  </script>

</head>
<body>

  <video id="test_video" controls preload="none" class="video-js vjs-default-skin" width="640" height="264"
      poster="http://video-js.zencoder.com/oceans-clip.png"
      data-setup="{}">
    <source src="http://video-js.zencoder.com/oceans-clip.mp4" type='video/mp4' />
    <source src="http://video-js.zencoder.com/oceans-clip.webm" type='video/webm' />
    <source src="http://video-js.zencoder.com/oceans-clip.ogv" type='video/ogg' />
    <track kind="captions" src="demo.captions.vtt" srclang="en" label="English"></track><!-- Tracks need an ending tag thanks to IE9 -->
    <track kind="subtitles" src="demo.captions.vtt" srclang="en" label="English"></track><!-- Tracks need an ending tag thanks to IE9 -->
    <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>
  </video>
  <br/>
  <!--
  <span class='next badge'>Next</span>
  <span class='prev'>Prev</span>
  <span class='remove'>Remove</span>
  <span class='add'>Add</span>
  <span class='reset'>Reset</span>
  <span class='destroy'>Destroy</span>
  -->
  <div id="newVal"></div>
</body>
<script>
var sampleMarker = [];//formatted array of tag for markers
//parsing json file
$.getJSON( "sample.json", function( data ) {

     $.each( data.transcript.text, function( key , value ) {   
	        var output="<p>";
			var startTime = value.start ;
			var tagValue = value.text;
			$.trim(tagValue);
			tagValue = tagValue.replace(/\s+/g, '</div><div class="badge">');
			tagValue = "<div class='badge'>" + tagValue;
			tagValue += "</div>";
			itemTag = {}
			itemTag ["time"] = startTime;
			itemTag ["text"] = tagValue;
			sampleMarker.push(itemTag);
    });        
});

// initialize video.js
var shobdho = videojs('test_video');
//Search tag
var myFunc = function(){
  var availableTags = [
		"Animal",
		"Honest",
		"Education",
		"Briliant",
		"Example",
		"Tree",
		"Find",
		"Truth",
		"Jungle",
		"Technology",
		"Forest",
		"World",
		"Happy",
		"Book"
    ];
	$("#tags").focus(function(){
		$( "#tags" ).autocomplete({
			source: availableTags
		});
	});
    
};

shobdho.on('play', myFunc);
//load the marker plugin
shobdho.markers({
      markerTip:{
         display: true,
         text: function(marker) {
            return marker.text;
         }
      },
      breakOverlay:{
         display: false,
         displayTime: 3,
         text: function(marker) {
            return "This is an break overlay: " + marker.text;
         }
      },
	  markers: sampleMarker
});

var searchBox='<form id="demo-2"><input type="search" placeholder="Search" id="tags"></form>';
	// fire up the plugin
shobdho.overlay({
      content: searchBox,
      overlays: [{
        start: 'play',
        align: 'bottom-right'
      }]
});   
</script>
</html>
